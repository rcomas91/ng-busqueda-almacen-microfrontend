<!-- <div >
    <button type="button" [routerLink]="['/necesidades/form']" class="btn btn-success">Adicionar necesidad</button>


</div>
<div *ngIf="necesidades?.length==0" class="alert alert-info">
    No hay registros en la base de datos!
</div>
<table class="table table-bordered table-hover  table-responsive"  *ngIf="necesidades?.length>0">

    <thead>
        <tr>
                <th>id</th>
            <th>pozo</th>
            <th>articulo</th>
            <th>fecha</th>
            <th>cantidad</th>
            <th>editar</th>
            <th>eliminar</th>
        </tr>
    </thead>
    
    <tbody>
        <tr *ngFor="let necesidad of necesidades">
            <td>{{necesidad.id}}</td>
            <td>{{necesidad.pozo}}</td>
            <td>{{necesidad.articulo.nombre}}</td>
            <td>{{necesidad.fecha}}</td>
            <td>{{necesidad.cantidad}}</td>
            <td>    <button type="button" [routerLink]="['/necesidades/form',necesidad.id]" class="btn btn-primary">editar</button>
            </td>
            <td>    <button type="button" (click)="delete(necesidad)" name="eliminar" class="btn btn-danger">eliminar</button>
            </td>

        </tr>
    
    
    </tbody>
      </table>
 -->
<h2>Necesidades en los Pozos</h2>
 <div *ngIf="dataSource?.data.length>0;else noRecord" class="example-container mat-elevation-z8">
    <mat-table  #table [dataSource]="dataSource" matSort matTableExporter #exporter="matTableExporter">
   
  
   <!--  Columna IntervaloId-->
   <ng-container matColumnDef="nombrePozo">
    <mat-header-cell *matHeaderCellDef mat-sort-header>
      nombrePozo</mat-header-cell
    >
    <mat-cell *matCellDef="let row" > {{ row.nombrePozo}} </mat-cell>
    
  </ng-container>

      <!--  Columna IntervaloId-->
      <ng-container matColumnDef="codigo">
        <mat-header-cell *matHeaderCellDef mat-sort-header>
          codigo</mat-header-cell
        >
        <mat-cell *matCellDef="let row"> {{ row.codigo }} </mat-cell>
      </ng-container>
  
         <!--  Columna IntervaloId-->
         <ng-container matColumnDef="UM">
          <mat-header-cell *matHeaderCellDef mat-sort-header>
            UM</mat-header-cell
          >
          <mat-cell *matCellDef="let row"> {{ row.um }} </mat-cell>
        </ng-container>
    
  
      
    
  
      <!--  Columna IntervaloId-->
      <ng-container matColumnDef="nombre">
        <mat-header-cell *matHeaderCellDef mat-sort-header>
          nombre</mat-header-cell
        >
        <mat-cell *matCellDef="let row"> {{ row.nombre }} </mat-cell>
      </ng-container>
   
  
    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="cantidad">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        cantidad necesaria</mat-header-cell
      >
      <mat-cell *matCellDef="let row"> {{ row.cantidad }} </mat-cell>
    </ng-container>
    
  
    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="existencia">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Existen en el almacen</mat-header-cell
      >
      <mat-cell *matCellDef="let row"> {{ row.existencia }} </mat-cell>
    </ng-container>
    
  
    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="precioCup">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        precioCup</mat-header-cell
      >
      <mat-cell *matCellDef="let row"> {{ row.precioCUP|currency }} </mat-cell>
    </ng-container>
  
      <!--  Columna IntervaloId-->
      <ng-container matColumnDef="utm_mov">
        <mat-header-cell *matHeaderCellDef mat-sort-header>
          utm_mov</mat-header-cell
        >
        <mat-cell *matCellDef="let row"> {{ row.utm_mov |date}} </mat-cell>
      </ng-container>
      
  
      <!--  Columna IntervaloId-->
      <ng-container matColumnDef="precioTotal">
        <mat-header-cell *matHeaderCellDef mat-sort-header>
          precioTotal</mat-header-cell
        >
        <mat-cell *matCellDef="let row"> {{ row.precioCUP*row.cantidad |currency}} </mat-cell>
      </ng-container>
   <!--  Columna IntervaloId-->
   <ng-container matColumnDef="estado">
    
    <mat-header-cell *matHeaderCellDef mat-sort-header>
      estado</mat-header-cell
    >
    <mat-cell *matCellDef="let row" style="cursor: pointer;"  (click)="cambiarEstado(row)"> {{ row.estado}} </mat-cell>

  </ng-container>


     

      <ng-container matColumnDef="Borrar">
        <mat-header-cell *matHeaderCellDef mat-sort-header>
          Borrar</mat-header-cell
        >
        <mat-cell *matCellDef="let row">
          <button mat-raised-button color="warn" (click)="delete(row.id)"focusable="false" >
              Borrar
              </button>
        </mat-cell>
      
      </ng-container>
  
  
      <mat-header-row
        *matHeaderRowDef="displayedColumns"
        class="encabezado"
      ></mat-header-row>
      <mat-row [ngClass]="{ 'marked': (row.existencia-row.cantidad) <0}" *matRowDef="let row; columns: displayedColumns"></mat-row>
    </mat-table>
  
 
  </div>
           
  <ng-template #noRecord>
    <div>
      <h3 style="display: flex; justify-content: center; align-items: center">  No hay registros en la BD.</h3>
   
     </div>
    </ng-template>


  <button mat-raised-button color="primary" 
  (click)="exporter.exportTable('xlsx', {fileName:'table'})">Export to xlsx</button>
  <!-- <div>
    <button  [routerLink]="['/articulos/form']"  mat-raised-button color="accent">Adicionar Recurso</button>
    
  </div> -->
<!--   
  <span >Gran Total:{{sum|currency}}</span>
  
        -->
        <mat-card *ngIf="isLoading" 
        style="display: flex; justify-content: center; align-items: center">
        <mat-progress-spinner 
         color="primary" 
         mode="indeterminate">
        </mat-progress-spinner>
        </mat-card>



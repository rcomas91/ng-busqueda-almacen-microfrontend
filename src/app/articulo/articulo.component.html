<h2>{{title  + this.pozoService.pozo.nombrePozo}}</h2>

<div *ngIf="dataSource?.data.length>0;else noRecord" class="example-container mat-elevation-z8">
  <mat-table #table [dataSource]="dataSource" matSort>


    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="codigo">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        codigo</mat-header-cell
      >
      <mat-cell *matCellDef="let row"> {{ row.codigo }} </mat-cell>
    </ng-container>

       <!--  Columna IntervaloId-->
       <ng-container matColumnDef="UM">
        <mat-header-cell *matHeaderCellDef mat-sort-header>
          UM</mat-header-cell
        >
        <mat-cell *matCellDef="let row"> {{ row.um }} </mat-cell>
      </ng-container>







    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="nombre">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        nombre</mat-header-cell
      >
      <mat-cell *matCellDef="let row"> {{ row.nombre }} </mat-cell>
    </ng-container>


  <!--  Columna IntervaloId-->
  <ng-container matColumnDef="cantidad">
    <mat-header-cell *matHeaderCellDef mat-sort-header>
      cantidad solicitada</mat-header-cell
    >
    <mat-cell *matCellDef="let row"> {{ row.cantidad }} </mat-cell>
  </ng-container>


  <!--  Columna IntervaloId-->
  <ng-container matColumnDef="existencia">
    <mat-header-cell *matHeaderCellDef mat-sort-header>
      Existen en el almacen</mat-header-cell
    >
    <mat-cell *matCellDef="let row"> {{ row.existencia }} </mat-cell>
  </ng-container>

    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="cantReal">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        cantReal</mat-header-cell
      >

      <mat-cell   *matCellDef="let row"><p *ngIf="row.existencia!==null"> {{ row.existencia-cantPedidos }}</p> </mat-cell>

    </ng-container>


  <!--  Columna IntervaloId-->
  <ng-container matColumnDef="precioCup">
    <mat-header-cell *matHeaderCellDef mat-sort-header>
      precioCup</mat-header-cell
    >
    <mat-cell *matCellDef="let row"> {{ row.precioCUP|currency }} </mat-cell>
  </ng-container>

    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="utm_mov">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        utm_mov</mat-header-cell
      >
      <mat-cell *matCellDef="let row"> {{ row.utm_mov |date}} </mat-cell>
    </ng-container>

    <!--  Columna IntervaloId-->
    <ng-container matColumnDef="precioTotal">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        precioTotal</mat-header-cell
      >
      <mat-cell *matCellDef="let row"> {{ row.precioCUP*row.cantidad |currency}} </mat-cell>
    </ng-container>

          <!--  Columna Editar-->

          <!-- <ng-container matColumnDef="Editar">
            <mat-header-cell *matHeaderCellDef mat-sort-header>
                Editar</mat-header-cell
            >
            <mat-cell *matCellDef="let row">
              <button mat-raised-button color="primary" [routerLink]="['/articulos/form',row.id]" focusable="false" >
                Editar
              </button>
            </mat-cell>


          </ng-container> -->

    <ng-container  matColumnDef="Borrar">
      <mat-header-cell *matHeaderCellDef mat-sort-header>
        Retirar recurso
        </mat-header-cell
      >
      <mat-cell  *matCellDef="let row">
        <button mat-raised-button  color="warn" (click)="delete(row.id)"focusable="false" >
            Retirar
            </button>
      </mat-cell>

    </ng-container>

    <button mat-raised-button color="warn">Warn</button>

    <mat-header-row
      *matHeaderRowDef="displayedColumns"
      class="encabezado"
    ></mat-header-row>
     <mat-row [ngClass]="{ 'marked': (row.existencia-cantPedidos) <0 && row.existencia}" *matRowDef="let row; columns: displayedColumns"></mat-row>
    <!-- <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row> -->

  </mat-table>



</div>
<ng-template #noRecord>
  <div>
    <h3 style="display: flex; justify-content: center; align-items: center">  No hay registros en la BD.</h3>

   </div>
</ng-template>
<div>
  <button mat-raised-button (click)="goBack()">Volver</button>

  <button  [routerLink]="['/articulos/form']"  mat-raised-button color="accent">Asignar Recurso del Almacen</button>

  <button  [routerLink]="['/articuloPropio/form']"  mat-raised-button color="warn">Adicionar nuevo Recurso</button>

</div>

<span >Gran Total:{{sum|currency}}</span>

<mat-card *ngIf="isLoading"
style="display: flex; justify-content: center; align-items: center">
<mat-progress-spinner
 color="primary"
 mode="indeterminate">
</mat-progress-spinner>
</mat-card>

<!-- <h2 >Necesidades</h2>
<app-necesidad></app-necesidad> -->
